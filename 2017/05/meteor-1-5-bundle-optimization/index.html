

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.20.7">
    <meta name="theme" content="Tranquilpeak 0.3.1-BETA">
    <title>Meteor 1.5 ~ Bundle Optimization &#43; Examples</title>
    <meta name="author" content="Alan Blount">
    <meta name="keywords" content=", development, code, superpowers">

    <link rel="icon" href="https://code.zeroasterisk.com/favicon.png">
    

    
    <meta name="description" content="deep dive into Meteor 1.5 dynamic imports. When, how, and why.">
    <meta property="og:description" content="deep dive into Meteor 1.5 dynamic imports. When, how, and why.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Meteor 1.5 ~ Bundle Optimization &#43; Examples">
    <meta property="og:url" content="/2017/05/meteor-1-5-bundle-optimization/">
    <meta property="og:site_name" content="zeroasterisk talks code">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="zeroasterisk talks code">
    <meta name="twitter:description" content="deep dive into Meteor 1.5 dynamic imports. When, how, and why.">
    
      <meta name="twitter:creator" content="@zeroasterisk">
    
    

    
    

    
      <meta property="og:image" content="//www.gravatar.com/avatar/29e2d6431d4a86cdc18df0dd4c699a38?s=640">
    

    
    
    

    

    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" />
    
    
    <link rel="stylesheet" href="https://code.zeroasterisk.com/css/style-u6mk0ojoywresbx8iepslrmmhl4stuhrsxuwhkpwrkrx7mryjcaimasnk4pi.min.css" />
    
    

    
      
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-2011466-10', 'auto');
ga('send', 'pageview');
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://code.zeroasterisk.com/">zeroasterisk talks code</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://code.zeroasterisk.com/#about">
    
    
    
      
        <img class="header-picture" src="//www.gravatar.com/avatar/29e2d6431d4a86cdc18df0dd4c699a38?s=90" alt="" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://code.zeroasterisk.com/#about">
          <img class="sidebar-profile-picture" src="//www.gravatar.com/avatar/29e2d6431d4a86cdc18df0dd4c699a38?s=110" alt="" />
        </a>
        <h4 class="sidebar-profile-name">Alan Blount</h4>
        
          <h5 class="sidebar-profile-bio"><strong>Learning to Code</strong> is like <strong>Aquiring Superpowers</strong>.<br/><br/>If you are interested in being a better programmer, I&rsquo;d like to help. I too am always trying to improve and learn new things.<br/><br/><em><a href="http://imgur.com/7l3mEH9">We&rsquo;re in it together</a></em></h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://code.zeroasterisk.com/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://code.zeroasterisk.com/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://code.zeroasterisk.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://stackoverflow.com/users/194105/zeroasterisk" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-stack-overflow"></i>
      
      <span class="sidebar-button-desc">Stack Overflow</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/zeroasterisk" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://code.zeroasterisk.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      Meteor 1.5 ~ Bundle Optimization &#43; Examples
    </h1>
  
  <div class="postShorten-meta post-meta">
  
    <time itemprop="datePublished" datetime="2017-05-31T00:00:00Z">
      2017-05-31
    </time>
  
  <i class="fa fa-chevron-right"></i>
  
  
  
    <span></span>
    
      <a class="category-link" href="https://code.zeroasterisk.com/categories/code-learning">code learning</a>
    
  


</div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>I have been playing with <a href="https://meteor.com/">Meteor</a> 1.5 and it&rsquo;s dynamic imports,
which can be used to reduce the amount of javascript code sent to the browser.</p>

<p>This article is a deep dive into how to profile and optimize your client side code
to make smarter use of the new dynamic imports&hellip;</p>

<p>Which will make <strong>meteor load faster for your users</strong>.</p>

<p></p>

<blockquote>
<p>If you&rsquo;re not already familiar with Meteor you should checkout the <a href="https://meteor.com/">meteor website</a> and the <a href="https://themeteorchef.com/">meteor chef</a>
Come back to this when you&rsquo;re comfortable and want to optimize an existing application.</p>
</blockquote>

<h1 id="table-of-contents"></h1><nav id="TableOfContents">
<ul>
<li><a href="#setup-a-basic-meteor-project">Setup a Basic Meteor Project</a></li>
<li><a href="#goal-reduce-time-to-initial-render">Goal: Reduce Time to Initial Render</a></li>
<li><a href="#plan-profile-to-determine-work-to-be-done">Plan: Profile to Determine Work to be Done</a>
<ul>
<li><a href="#how-to-profile-meteor-javascript-bundle">How to Profile Meteor JavaScript Bundle?</a></li>
<li><a href="#how-can-we-optimize">How can we optimize?</a>
<ul>
<li><a href="#remove">Remove</a></li>
<li><a href="#reduce">Reduce</a></li>
<li><a href="#delay">Delay</a></li>
</ul></li>
<li><a href="#pick-high-value-targets-sections-to-delay">Pick high value targets - sections to delay</a></li>
</ul></li>
<li><a href="#optimize-delay-loading-code-with-a-dynamic-import">Optimize: delay loading code with a dynamic import</a></li>
<li><a href="#review-after-our-dynamic-import">Review: After our dynamic import</a>
<ul>
<li><a href="#gotcha-you-have-to-dynamic-import-all-references">Gotcha: You have to dynamic import ALL references</a></li>
</ul></li>
<li><a href="#understand-so-how-does-it-work">Understand: So how does it work?</a>
<ul>
<li><a href="#keep-this-in-mind-dynamic-imports-are-not-free">Keep this in mind: Dynamic Imports are not Free</a></li>
<li><a href="#built-in-optimization-each-component-is-only-imported-1-time">Built In Optimization: Each Component IS Only Imported 1 Time</a></li>
</ul></li>
<li><a href="#experiments-what-can-you-do-with-dynamic-imports">Experiments: What can you do with dynamic imports?</a></li>
<li><a href="#experiments-profiling-imports">Experiments: Profiling imports?</a></li>
<li><a href="#summary">Summary</a></li>
<li><a href="#thanks-credits">Thanks &amp; Credits</a></li>
</ul>
</nav>

<p><a href="https://blog.meteor.com/announcing-meteor-1-5-b82be66571bb">Meteor 1.5 landed</a>,
and it&rsquo;s got a lot of improvements,
but I think the big new feature that people want to know about is
<strong>the ability to dynamically import code</strong>.</p>

<blockquote>
<p>What is that?<br/>
Why is it useful?<br/>
How do I do it?<br/>
How do I know what to dynamically import?</p>
</blockquote>

<p>Well, lets look into some of those questions, and how to use these new tools to improve your application&rsquo;s load time.</p>

<p>This post is <strong>about identifying what to optimize and how to optimize</strong>&hellip;
I will do another about how to develop/architect better dynamically imported components.</p>

<h1 id="setup-a-basic-meteor-project">Setup a Basic Meteor Project</h1>

<blockquote>
<p>You can clone <a href="https://github.com/zeroasterisk/meteor-example-optimize-client-bundle.git">this repo</a>
and checkout the <code>01-initial</code> branch.
Or you can use the following instructions to get up to this starting point.
Or you can jump right into this topic on your own project.</p>
</blockquote>

<p>To do anything, we need a simple test project.
I am starting with <a href="https://github.com/themeteorchef/base">Meteor Chef Base</a>
and I am adding <a href="https://github.com/airbnb/react-dates">react-dates</a>
and a bit of functionality to pick date ranges
<em>(I also happen to know it has a noticeable impact on bundle size, which we will see later)</em>.</p>

<pre><code class="language-sh">git clone https://github.com/themeteorchef/base.git meteor-example-optimize-client-bundle
cd meteor-example-optimize-client-bundle
rm -rf .git &amp;&amp; git init &amp;&amp; git add . &amp;&amp; git add .meteor/*
meteor update --release 1.5
cat .meteor/release
  METEOR@1.5
meteor npm install --save react-dates moment react-addons-shallow-compare
npm start
</code></pre>

<p>I then edited the code and added an example to create a simple example project.</p>

<p><img src="https://media.giphy.com/media/xUA7aRqXjSZBc4oHDy/giphy.gif" alt="screencast basic functionality" /></p>

<p>Not terrible for a quick example <em>(and not a todo list)</em>.</p>

<h1 id="goal-reduce-time-to-initial-render">Goal: Reduce Time to Initial Render</h1>

<blockquote>
<p>You can clone <a href="https://github.com/zeroasterisk/meteor-example-optimize-client-bundle.git">this repo</a>
and checkout the <code>02-before-optimization</code> branch.</p>
</blockquote>

<p>Make things faster, always.
Initial render of the site/app is a <em>great</em> metric to improve on
and one of the pain points for meteor apps.</p>

<p>When in <em>production</em> mode, Meteor builds all of your app into 1 big JS and 1 big CSS file - these are called the <em>&ldquo;client bundle&rdquo;</em>.</p>

<p>Meteor does it&rsquo;s best to minimize those files, and cache them&hellip; but it can still be a whole lot of stuff sent to the client (this is all of your code and your code&rsquo;s dependencies) on initial pageload&hellip;
Especially if you don&rsquo;t always need some of those components and dependencies.</p>

<p>To test and profile, <strong>we have to run in production mode</strong>.</p>

<p><code>meteor --production</code></p>

<p>Our super-tiny example app is <em>not too bad</em>, but could certainly get better.</p>

<p>Our biggest slowdown by far is the bundle of all javascript.</p>

<table>
<thead>
<tr>
<th></th>
<th>size</th>
<th>download_time</th>
</tr>
</thead>

<tbody>
<tr>
<td>JS bundle</td>
<td>494 KB</td>
<td>444 ms</td>
</tr>

<tr>
<td>CSS bundle</td>
<td>7 KB</td>
<td>29 ms</td>
</tr>
</tbody>
</table>

<p><img src="https://puu.sh/w80ky/6ded16d16d.png" alt="time-to-render-prod-mode-before-optimize" /></p>

<p>Wow, but this is such a tiny application&hellip; what can we do?</p>

<h1 id="plan-profile-to-determine-work-to-be-done">Plan: Profile to Determine Work to be Done</h1>

<p>You should never optimize without profiling.</p>

<p>Sure, when you develop keep performance and optimization in mind - use best practices and all that.
But when you are trying to figure out how you can improve performance, you should use tools to profile and get information about what to optimize.
Without that profiling information, you will be treading water, spending lots of effort for little value.</p>

<h2 id="how-to-profile-meteor-javascript-bundle">How to Profile Meteor JavaScript Bundle?</h2>

<p>So we know we need to reduce the total JavaScript Bundle&hellip; but how?
What&rsquo;s Big?
What&rsquo;s easy to remove?
What&rsquo;s not used?</p>

<p>Luckily, there is a now a
<a href="https://atmospherejs.com/meteor/bundle-visualizer">bundle-visualizer</a>
package which gives us an awesome
sundial graph for identifying size in our initial load.</p>

<pre><code class="language-sh">meteor add bundle-visualizer
npm run start-as-prod
# ^ if you don't have my package.json scripts, you would run
#   meteor --production
</code></pre>

<p>Then an overlay happens in your browser and you can hover over parts to see what they total size is for the part, and it&rsquo;s children&hellip;</p>

<p><img src="https://media.giphy.com/media/l4FGFeTW6pqVvabGE/giphy.gif" alt="bundle-visualizer-before-optimize" /></p>

<p>This is <strong>AMAZING</strong>
<img src="http://emojis.slackmojis.com/emojis/images/1450447981/152/aw_yeah.gif" alt="aw_yeah" /></p>

<p>Real quick review of some numbers here:</p>

<table>
<thead>
<tr>
<th>section</th>
<th>percent</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>react-dom</code></td>
<td>9.4%</td>
</tr>

<tr>
<td><code>react-dates</code></td>
<td>9.1%</td>
</tr>

<tr>
<td><code>react-bootstrap</code></td>
<td>8.4%</td>
</tr>

<tr>
<td><code>bootstrap</code></td>
<td>6.4%</td>
</tr>

<tr>
<td><code>jquery</code></td>
<td>4.6%</td>
</tr>

<tr>
<td><code>handlebars</code></td>
<td>4.0%</td>
</tr>

<tr>
<td>app code</td>
<td>1.7%</td>
</tr>
</tbody>
</table>

<p><img src="https://puu.sh/w82Pi/11b30cc350.png" alt="app-1.7percent" /></p>

<p>My entire app code is <code>32k</code> which is only <code>1.7%</code> of the clientside bundle!</p>

<h2 id="how-can-we-optimize">How can we optimize?</h2>

<p>So we can look at our codebase in <em>sections</em> and do something&hellip;</p>

<p><em>What exactly will we even be doing?</em></p>

<p>It really comes down to 3 options:</p>

<ol>
<li><strong>remove</strong> a section of code from our project entirely <em>(best solution, but not often possible)</em></li>
<li><strong>reduce</strong> the size of a section <em>(micro optimization, not usually effective)</em></li>
<li><strong>delay</strong> loading a section via <strong>dynamic import</strong> <em>(our new option)</em></li>
</ol>

<h3 id="remove">Remove</h3>

<p>In this example, I could <strong>remove</strong> <code>jquery</code> or <code>handlebars</code> because I&rsquo;m not using it&hellip; but Meteor Chef Base is&hellip;</p>

<p>This is outside of the scope of this article.  If you can remove code, do so.</p>

<h3 id="reduce">Reduce</h3>

<p>There&rsquo;s very little I could do to <strong>reduce</strong> the size of my code, my application code is <em>super tiny</em>.</p>

<p>This is usually the least valuable way to spend your time.  Better to remove or delay a bunch first.</p>

<h3 id="delay">Delay</h3>

<p>Ok&hellip; What can I <strong>delay</strong>, and what are the ramifications of doing so?</p>

<p>Basically you want to look for things which are only used once or twice,
but which have a heavy footprint.</p>

<h2 id="pick-high-value-targets-sections-to-delay">Pick high value targets - sections to delay</h2>

<p>Armed with a profile of code sections <em>(size)</em>,
we try to identify a what we can remove from our initial bundle, and only load as needed.</p>

<p>We start by looking at the &ldquo;biggest&rdquo; sections of code <em>(clockwise)</em>,
and for each section we try to ask ourselves if we can <strong>remove</strong> or <strong>delay</strong> loading.</p>

<p><strong>Pro Delay:</strong></p>

<ul>
<li>Is the section of code used only once or in a very few components?</li>
<li>Is the section of code an optional &ldquo;secondary&rdquo; feature?</li>
<li>Is the section of code a big enough percentage of the bundle to make it worthwhile?</li>
</ul>

<p><strong>Against Delay:</strong></p>

<ul>
<li>Is the component required to make the initial page render look ok to the user?</li>
<li>Is the page going to significantly <em>jump</em> when the component gets loaded dynamically, after the rest of the page has rendered?</li>
<li>Is the lack of that component going to mess things up for server side rendering?</li>
</ul>

<p>In this case, <code>react-dates</code> is a great candidate, because I <strong>only use it once</strong> in my codebase, but <strong>it&rsquo;s got a huge footprint</strong> in the clientside bundle.</p>

<blockquote>
<p>Note: I&rsquo;m using <a href="https://github.com/ggreer/the_silver_searcher">ag (the silver searcher)</a> or <a href="https://github.com/BurntSushi/ripgrep">rg (ripgrep)</a> to search through file contents, lightning fast.</p>
</blockquote>

<pre><code class="language-sh">$ ag 'react-dates' imports -c
imports/ui/components/PickDates.js:1
</code></pre>

<h1 id="optimize-delay-loading-code-with-a-dynamic-import">Optimize: delay loading code with a dynamic import</h1>

<p>Since we decided to target <code>react-dates</code>,
I am going to dynamically load the only component which uses it, <code>PickDates</code>.</p>

<p>I could do this several ways, but here&rsquo;s a very simple approach.</p>

<p>First I install a super-useful helper
<a href="https://github.com/thejameskyle/react-loadable">react-loadable</a>,
which handles the <em>&ldquo;maybe I&rsquo;m loading, maybe I&rsquo;m loaded&rdquo;</em> react component.</p>

<pre><code class="language-sh">meteor npm install --save react-loadable
</code></pre>

<p><strong>before: normal import</strong> part of clientside bundle</p>

<pre><code class="language-js">import PickDates from './PickDates';
</code></pre>

<p><strong>after: dynamic import</strong> no longer a part of clientside bundle</p>

<pre><code class="language-js">import Loader from 'react-loader';

// generic loading component to show while transfering section of code
const LoadingComponent = () =&gt; &lt;span className=&quot;text-muted&quot;&gt;&lt;i className=&quot;fa fa-refresh&quot; /&gt;&lt;/span&gt;;
// new version of the component, now: loading --&gt; rendered
const PickDates = Loader({
  // this does the dynamic import, and returns a promise
  loader: () =&gt; import('./PickDates'),
  // this is our generic loading display (optional)
  LoadingComponent,
  // this is a delay before we decide to show our LoadingComponent (optional)
  delay: 200,
});
</code></pre>

<p>It can get a lot more complex, but this is a fine place to start.</p>

<ol>
<li><code>react-loader</code> is a <a href="https://facebook.github.io/react/docs/higher-order-components.html">HOC</a>
which will render our component when it&rsquo;s available.</li>
<li>The <code>loader: &lt;func&gt;</code> function recieves a promise which resolves as soon as the dynamic import is done.</li>
<li>The <code>import(&lt;path&gt;)</code> is the where the actual dynamic import <em>(magic)</em> happens.
It returns a promise which resolves when the component is on the client.</li>
<li>The <code>LoadingComponent</code> shows while the component is not yet loaded.</li>
<li>The <code>delay</code> hides the <code>LoadingComponent</code> for this long, so there is less flicker in case the component is already cached and can just load-in super fast.</li>
</ol>

<p>Because the <code>import</code> is no longer part of the initial clientside bundle,
it is compiled with all of it&rsquo;s dependencies, separately.
They will be loaded later, the first time they are used, and then cached on the client. <em>(more on this later)</em></p>

<h1 id="review-after-our-dynamic-import">Review: After our dynamic import</h1>

<blockquote>
<p>You can clone <a href="https://github.com/zeroasterisk/meteor-example-optimize-client-bundle.git">this repo</a>
and checkout the <code>04-after-optimization</code> branch.</p>
</blockquote>

<p>Did it do anything?  Lets profile again.</p>

<pre><code class="language-sh">npm run start-as-prod
# ^ if you don't have my package.json scripts, you would run
#   meteor --production
</code></pre>

<table>
<thead>
<tr>
<th>JS bundle</th>
<th>size</th>
</tr>
</thead>

<tbody>
<tr>
<td>before dynamic import</td>
<td>494 KB</td>
</tr>

<tr>
<td>after dynamic import</td>
<td>459 KB</td>
</tr>
</tbody>
</table>

<p><img src="https://puu.sh/w85w8/40aaf947e5.png" alt="after-dynamic-import-network-tab" /></p>

<p>And how about our sundial?</p>

<p><img src="https://media.giphy.com/media/3og0IwwJqrZwK8JlMQ/giphy.gif" alt="after-dynamic-import-bundle" /></p>

<p>It looks like we no longer have the <code>react-dates</code> module at all&hellip;</p>

<p>But if I get rid of the <code>bundle-visualizer</code> then I can see our date picker working&hellip;</p>

<pre><code class="language-sh">meteor remove bundle-visualizer
</code></pre>

<p><img src="https://media.giphy.com/media/3o7buf4zcCkBnlL0jK/giphy.gif" alt="after-dynamic-import-still-working" /></p>

<h2 id="gotcha-you-have-to-dynamic-import-all-references">Gotcha: You have to dynamic import ALL references</h2>

<p>You could have <code>MyComponent</code> and <code>OtherComponent</code>, both of which included <code>react-dates</code>.</p>

<p>The <code>react-dates</code> section of code would only be removed from the initial clientside bundle
if both <code>MyComponent</code> and <code>OtherComponent</code> were dynamically imported.</p>

<p><strong>Any static import, ensures the component and all descendants are in the clientside bundle.</strong></p>

<h1 id="understand-so-how-does-it-work">Understand: So how does it work?</h1>

<p>Where is did the component go?  How does it work?</p>

<p>If you use the <em>Developer Tools &gt; Network tab &gt; WS (websocket)</em> and look at the frames,
you can find a request for the dynamic import,
and the response with the dynamic import payload.</p>

<p><img src="https://media.giphy.com/media/3ohzdZbi1jPbNlx9Ty/giphy.gif" alt="find-dynamic-imports-in-frames" /></p>

<p><img src="https://puu.sh/w86fn/6d86a850a7.png" alt="request" />
<img src="https://puu.sh/w86gK/3819c7813f.png" alt="response" /></p>

<p>That&rsquo;s actually kind of a <strong>big</strong> frame!</p>

<p>But it <em>is cached</em>, websocket transfer is pretty fast, and it only is loaded when it&rsquo;s needed.</p>

<p>Furthermore, each component is <strong>only imported 1 time</strong>, even if imported via different paths.</p>

<h2 id="keep-this-in-mind-dynamic-imports-are-not-free">Keep this in mind: Dynamic Imports are not Free</h2>

<p>The dynamic import does make the section of code disappear from your clientside bundle.</p>

<p>It does &ldquo;improve&rdquo; the profiled metrics&hellip; but it has a few costs:</p>

<ul>
<li>starting meteor is a wee bit slower <em>(sorry devs)</em></li>
<li>added complexity</li>
<li>bundle over websocket can not be offloaded to a CDN</li>
<li>dynamic imports are not <em>(currently)</em> profileable&hellip; so to profile you&rsquo;d have to make static imports again.</li>
</ul>

<h2 id="built-in-optimization-each-component-is-only-imported-1-time">Built In Optimization: Each Component IS Only Imported 1 Time</h2>

<blockquote>
<p>You can clone <a href="https://github.com/zeroasterisk/meteor-example-optimize-client-bundle.git">this repo</a>
and checkout the <code>06-experiments</code> branch.</p>
</blockquote>

<p>I conducted a few experiments (more below) and I now better understand how the imports work.</p>

<p>Here is an obvious structure of components:</p>

<pre><code>- MyPage
  - Trunk &lt;-- dynamicly imported from a page
    - Limb
      - Branch &lt;-- dynamicly imported from a page
        - Twig
          - Leaf
</code></pre>

<p>At first, my experiment was to log into the console, when JS &ldquo;loaded&rdquo; code.</p>

<p><img src="https://puu.sh/wbcVJ/ccfac76efc.png" alt="ss" /></p>

<p>That caused me to believe they were in fact imported twice&hellip; but <strong>they were not</strong>.</p>

<p>In fact, if you look at the websocket frames,
you can see that <code>Leaf</code> component is only imported 1 time.
<img src="https://puu.sh/wbdrg/1e9d059d96.png" alt="ss" />
<img src="https://puu.sh/wbdrP/9106658bc2.png" alt="ss" /></p>

<p>And it is more obvious, when you load the Trunk first and the Branch second:
<img src="https://puu.sh/wbe2H/3caac65457.png" alt="ss" /></p>

<p>Then there is not second import for Branch, because it was already imported above&hellip;</p>

<p><strong>This is REALLY impressive, and speaks highly of the module system in Meteor</strong></p>

<h1 id="experiments-what-can-you-do-with-dynamic-imports">Experiments: What can you do with dynamic imports?</h1>

<blockquote>
<p>You can clone <a href="https://github.com/zeroasterisk/meteor-example-optimize-client-bundle.git">this repo</a>
and checkout the <code>06-experiments</code> branch.</p>
</blockquote>

<p>I felt like trying out a few more variations on how things can be loaded.</p>

<p><strong>This is a Work In Progress, more coming soon</strong></p>

<ul class="task-list">
<li><input type="checkbox" checked disabled class="task-list-item"> import as in-file function, and in-file loader <em>(works)</em></li>
<li><input type="checkbox" checked disabled class="task-list-item"> import as shared function, but in-file loader <em>(works)</em></li>
<li><input type="checkbox" disabled class="task-list-item"> import as shared function, path as arg <em>(fails, can not find the path)</em></li>
<li><input type="checkbox" disabled class="task-list-item"> import a npm package directly <em>(fails)</em></li>
<li><input type="checkbox" checked disabled class="task-list-item"> import a component that imports a component <em>(works, and a good idea, within reason)</em></li>
</ul>

<h1 id="experiments-profiling-imports">Experiments: Profiling imports?</h1>

<blockquote>
<p>You can clone <a href="https://github.com/zeroasterisk/meteor-example-optimize-client-bundle.git">this repo</a>
and checkout the <code>07-profiling</code> branch.</p>
</blockquote>

<ul class="task-list">
<li><input type="checkbox" checked disabled class="task-list-item"> import (static) <code>lodash.cloneDeep</code> = <code>8.9kb</code> <a href="https://puu.sh/wc2Gs/f694dacc7b.png">screenshot</a></li>
<li><input type="checkbox" checked disabled class="task-list-item"> import (static) <code>lodash/cloneDeep</code> = <code>19.5kb</code> <a href="https://puu.sh/wc2Lq/88f9db3c45.png">screenshot</a> <a href="https://puu.sh/wc2KD/c333e1834e.png">screenshot2</a></li>
</ul>

<h1 id="summary">Summary</h1>

<p>You can now segment your meteor clientside codebase.</p>

<ul>
<li>You can profile and delay expensive components + dependencies</li>
<li>You can make an admin section <em>(or whatever section)</em> of your site only load when needed.</li>
<li>You can make every single route, only load when needed <em>(sub-optimal, but effective, temporarily)</em>.</li>
<li>Or better, you can dynamically load individual components&hellip; <em>(especially expensive ones)</em></li>
</ul>

<h1 id="thanks-credits">Thanks &amp; Credits</h1>

<p>Huge thanks to Meteor, MDG, and especially <a href="https://github.com/benjamn/">ben</a>&hellip; I&rsquo;ve been learning a lot just by reading your commits, and I am grateful for your contributions.</p>

<p>Also a huge thanks to <a href="https://github.com/abernix">jesse</a> for the bundle-visualizer and all your other meteor work.</p>

<p>Definitely read <a href="https://blog.meteor.com/announcing-meteor-1-5-b82be66571bb">the Meteor Blog Post</a> and maybe the <a href="https://github.com/meteor/meteor/pull/8327">huge pull request</a> for information about dynamic imports.</p>

<p>I&rsquo;ve also played with code from meteor&rsquo;s <a href="https://github.com/meteor/react-loadable-example">react-loadable example</a> which helped me to understand dynamic imports.</p>

<p>Other good reading, <a href="https://webpack.js.org/guides/code-splitting-async/">webpack&rsquo;s dynamic import</a> docs are useful too.</p>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small"></span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://code.zeroasterisk.com//tags/meteor/">meteor</a>

  <a class="tag tag--primary tag--small" href="https://code.zeroasterisk.com//tags/es7/">es7</a>

  <a class="tag tag--primary tag--small" href="https://code.zeroasterisk.com//tags/import/">import</a>

  <a class="tag tag--primary tag--small" href="https://code.zeroasterisk.com//tags/optimization/">optimization</a>

  <a class="tag tag--primary tag--small" href="https://code.zeroasterisk.com//tags/react/">react</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://code.zeroasterisk.com/2017/06/meteor-and-elixir-rocky-courtship/" data-tooltip="Meteor and Elixir (part one) A Rocky Courtship">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml"></span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://code.zeroasterisk.com/2017/05/why-wait-adopt-hugo-for-static-site-generation/" data-tooltip="Why wait? Adopt hugo for Static Site Generation">
          
            <span class="hide-xs hide-sm text-small icon-mr"></span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https%3a%2f%2fcode.zeroasterisk.com%2f2017%2f05%2fmeteor-1-5-bundle-optimization%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fcode.zeroasterisk.com%2f2017%2f05%2fmeteor-1-5-bundle-optimization%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https%3a%2f%2fcode.zeroasterisk.com%2f2017%2f05%2fmeteor-1-5-bundle-optimization%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#table-of-contents">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2017 <a href="https://github.com/zeroasterisk">zeroasterisk</a>. 
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        <div class="post-actions-wrap">
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://code.zeroasterisk.com/2017/06/meteor-and-elixir-rocky-courtship/" data-tooltip="Meteor and Elixir (part one) A Rocky Courtship">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml"></span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://code.zeroasterisk.com/2017/05/why-wait-adopt-hugo-for-static-site-generation/" data-tooltip="Why wait? Adopt hugo for Static Site Generation">
          
            <span class="hide-xs hide-sm text-small icon-mr"></span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https%3a%2f%2fcode.zeroasterisk.com%2f2017%2f05%2fmeteor-1-5-bundle-optimization%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fcode.zeroasterisk.com%2f2017%2f05%2fmeteor-1-5-bundle-optimization%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https%3a%2f%2fcode.zeroasterisk.com%2f2017%2f05%2fmeteor-1-5-bundle-optimization%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#table-of-contents">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <ul class="share-options">
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https%3a%2f%2fcode.zeroasterisk.com%2f2017%2f05%2fmeteor-1-5-bundle-optimization%2f">
        <i class="fa fa-google-plus"></i><span></span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fcode.zeroasterisk.com%2f2017%2f05%2fmeteor-1-5-bundle-optimization%2f">
        <i class="fa fa-facebook-official"></i><span></span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3a%2f%2fcode.zeroasterisk.com%2f2017%2f05%2fmeteor-1-5-bundle-optimization%2f">
        <i class="fa fa-twitter"></i><span></span>
      </a>
    </li>
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="//www.gravatar.com/avatar/29e2d6431d4a86cdc18df0dd4c699a38?s=110" alt="" />
    
    <h4 id="about-card-name">Alan Blount</h4>
    
      <div id="about-card-bio"><strong>Learning to Code</strong> is like <strong>Aquiring Superpowers</strong>.<br/><br/>If you are interested in being a better programmer, I&rsquo;d like to help. I too am always trying to improve and learn new things.<br/><br/><em><a href="http://imgur.com/7l3mEH9">We&rsquo;re in it together</a></em></div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Programmer at arms
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Louisville, KY, USA
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center"></div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://code.zeroasterisk.com/2017/07/elixir-ftw-it-really-is/">
                <h3 class="media-heading">Playing with Elixir is just FUN</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>I&rsquo;ve been using Elixir for a few weeks now, sometimes
<a href="https://code.zeroasterisk.com/2017/06/meteor-and-elixir-rocky-courtship/">forcing it to play nice with Mongodb/Meteor</a>
, which it doesn&rsquo;t really want to do.
Sometimes with Posgres <em>(which it loves)</em>.
Sometimes just plain ole&rsquo; Elixir with no persistance.</p>

<p>It <em>is</em> realllllly fun!</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://code.zeroasterisk.com/2017/06/meteor-and-elixir-rocky-courtship/">
                <h3 class="media-heading">Meteor and Elixir (part one) A Rocky Courtship</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jun 6, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>I have been watching Elixir for almost 2 years now, and debating if it&rsquo;s mature enough for me to invest in.</p>

<p>Obviously Erlang is super-mature, and Elixir is quite stable, but it&rsquo;s a question of &ldquo;is the community mature enough yet?&rdquo;</p>

<p>Since I&rsquo;m now writing this, I believe it is &ldquo;ready&rdquo;, and I&rsquo;m beginning a journey to build out some services in Elixir
to stand up next to existing node services (meteorjs) and slow move funcitonality over to to Elixir.</p>

<p>Chapter One: <strong>Proof of Concept, Mongo is supposed to be Simple.</strong></p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://code.zeroasterisk.com/2017/05/meteor-1-5-bundle-optimization/">
                <h3 class="media-heading">Meteor 1.5 ~ Bundle Optimization &#43; Examples</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>I have been playing with <a href="https://meteor.com/">Meteor</a> 1.5 and it&rsquo;s dynamic imports,
which can be used to reduce the amount of javascript code sent to the browser.</p>

<p>This article is a deep dive into how to profile and optimize your client side code
to make smarter use of the new dynamic imports&hellip;</p>

<p>Which will make <strong>meteor load faster for your users</strong>.</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://code.zeroasterisk.com/2017/05/why-wait-adopt-hugo-for-static-site-generation/">
                <h3 class="media-heading">Why wait? Adopt hugo for Static Site Generation</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Why&hellip; oh why&hellip; why did I wait so long?
I&rsquo;ve been talking about switching to a static site generator for years, since jekyllrb started gaining popularity.
I understood the benefits, but I had no compelling reason to switch&hellip; (sort of how I resisted git for a few years because svn worked well enough)
But who wants a WordPress site?
Well, ok, maybe you are using 12 plugins and doing fancy stuff.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://code.zeroasterisk.com/2017/01/2017-nerd-goals/">
                <h3 class="media-heading">2017 nerd goals</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"> Personal Nerd Goals  publish - rejuvinate a history of developer advocacy learn elixir - build a couple of projects from a couple of angles learn machine learning basics  </div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://code.zeroasterisk.com/2014/09/09/meteor-092rc1-with-cordova/">
                <h3 class="media-heading">Meteor 0.9.2-rc1 is fun to play with, Cordova support functional</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2014
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Last night I started playing with `meteor &#8211;release 0.9.2-rc1` which you can read about and play with too; check it out here:
https://meteor.hackpad.com/Getting-Started-With-Cordova-Z5n6zkVB1xq
It&#8217;s wonderful!
The local development and hot-code-push is a great improvement over any other solution I&#8217;ve been using. Builds were painless (mostly).
Most of my stumbling points were due to 9x, not the new Cordova stuff.
A few interesting details&#8230;
Cordova gets built here:
$ ll -a .</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://code.zeroasterisk.com/2014/04/24/great-advice-from-arunoda-contribute/">
                <h3 class="media-heading">Great advice from Arunoda “Just Contribute!”</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2014
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">http://readme.lk/noticed-tech-crowd-interview-arunoda-susiripala/
This advice might be aimed at people who already consider themselves developers, but there&#8217;s a nugget in there that&#8217;s perfect for anyone who is interested in getting started&#8230;
Pick some open-source project, probably a smaller one, that does something you&#8217;re interested in. Maybe it&#8217;s something you tried out and used. Maybe it&#8217;s something you tried out and it didn&#8217;t work out. Maybe it&#8217;s something you looked at and didn&#8217;t understand.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://code.zeroasterisk.com/2013/08/22/meteor-phonegapcordova-roundup-fall-2013/">
                <h3 class="media-heading">Meteor &#43; PhoneGap/Cordova (Roundup – Fall 2013)</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2013
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">UPDATE: see meteor-core-cordova-support-alpha-release-is-out (2014-08-25) for new information
&nbsp;
About Meteor and PhoneGap / Cordova Meteor is a rapid server/client development framework, written in JS &#8211; makes very interactive apps easy to build. http://meteor.com
PhoneGap / Cordova is a project to allow developers to use HTML, CSS, and JS to build mobile apps for all major devices. http://phonegap.com
Basics of Integrating Meteor + PhoneGap / Cordova The basic idea here is to use PhoneGap / Cordova to create a mobile App on several different platforms at once and it gives device hardware access; then “load” your Meteor application, which handles all of the rest of whatever you want your app to do.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://code.zeroasterisk.com/post/">
                <h3 class="media-heading">Posts</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero=""
         data-message-one=""
         data-message-other="">
         9 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('http://cdn.wallpapersafari.com/58/63/CbN6Ht.jpg');"></div>
  


    
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.js"></script>


<script src="https://code.zeroasterisk.com/js/script-wl33z0n6ocaypepiqrazthtivfrliqijej4rq8ek8gvrv1awftmgjuv8k4zc.min.js"></script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight').each(function(i, block) {
    var code = "";
    hljs.highlightAuto(block.innerText).value.split(/\r\n|\r|\n/).forEach(function(line) {
      code += "<span class=\"line\">" + line + "</span><br>";
    });
    if (code.length > 0) {
      block.innerHTML = code;  
    }
  });
  $('pre > code').each(function(i, block) {
    $(this).addClass('codeblock');
    hljs.highlightBlock(block);
  });
});
</script>

  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'https:\/\/code.zeroasterisk.com\/2017\/05\/meteor-1-5-bundle-optimization\/';
          
            this.page.identifier = '\/2017\/05\/meteor-1-5-bundle-optimization\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'zeroasterisk';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  





    
  </body>
</html>

